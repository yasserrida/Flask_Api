CREATE DATABASE classification;
use classification;

CREATE TABLE users (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,

    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

CREATE TABLE api_credentials (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255),
    app_key VARCHAR(255),
    app_secret VARCHAR(255),
    is_valide SMALLINT NOT NULL DEFAULT 1,
    user_id INT UNSIGNED NOT NULL,


    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE types (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    rule INT NOT NULL DEFAULT 1,
    ruleToExclude INT DEFAULT NULL,
    select_order INT NOT NULL DEFAULT 1,
    category_order INT NOT NULL DEFAULT 1,
    depends_on INT,
    required_type INT,
    correspandance VARCHAR(255) DEFAULT NULL,
    active SMALLINT NOT NULL DEFAULT 1,

    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    FOREIGN KEY (depends_on) REFERENCES types(id),
    FOREIGN KEY (required_type) REFERENCES types(id)
);

CREATE TABLE provenance (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    poids INT NOT NULL DEFAULT 1,
    type_id INT UNSIGNED,
    active SMALLINT NOT NULL DEFAULT 1,

    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    FOREIGN KEY (type_id) REFERENCES types(id)
);

CREATE TABLE keywords (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    poids INT NOT NULL DEFAULT 1,
    isExluded SMALLINT NOT NULL DEFAULT 0,
    type_id INT UNSIGNED,

    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    FOREIGN KEY (type_id) REFERENCES types(id)
);

INSERT INTO `users` VALUES 
    (1, 'admin@admin.com', '$2b$16$7QD5khQQ4L4QQ6VrHPGJYe5uXcOBcSsyulnisIa7fIiXUL42ctvzy'),
    (2, 'm.ougoury@eca-assurances.com', '$2b$12$cGOH.1x27ZwlQw1OzFfLveg728L9LUppXei7gFlT2L92VZxpfJq8m');

INSERT INTO `api_credentials` VALUES (1, 'self assurances', '08xkUvyOeRSLfvW-AlzdSQ', 'yemys44jdhKblZIezZRnC1PgcwkqkJ8H4eJYYfqRGP5QQsxb', 1, 2);

INSERT INTO `types` VALUES 
    (1, 'Feuille de soin'            , 2, 1, 2, NULL, NULL, 'ANIMAUXSIN'),
    (2, 'Nouvelle feuille soin'      , 1, 1, 1,    1, NULL, 'ANIMAUXSIN'),
    (3, 'Page NPAI'                  , 2, 5, 9, NULL, NULL, NULL),
    (4, 'NPAI MED'                   , 3, 2, 4, NULL,    3, 'ADB NPAI'),
    (5, 'NPAI MED ADP'               , 1, 2, 3,    3, NULL, 'Santé NPAI'),
    (6, 'Attestation droits'         , 2, 3, 6, NULL, NULL, 'SANTEGESTION'),
    (7, 'Feuille soin ADP'           , 1, 3, 5,    6, NULL, NULL),
    (8, 'Demande resiliation'        , 2, 4, 8, NULL, NULL, NULL),
    (9,'Demande resiliation ADP'     , 2, 4, 7,    8, NULL, 'ADPRESIL'),
    (10,'Demande resiliation ADB'    , 2, 4, 7,    8, NULL, 'IARDRESIL'),
    (11,'Demande resiliation animaux', 2, 4, 7,    8, NULL, 'ANIMAUXRESILIATION'),
    (12,'Droit de renonciation'      , 1, 4, 7,    8, NULL),
    (13,'Facture'                    , 3, 6, 11,NULL, NULL, 'SANTELIQUIDCASA'),
    (14,'Facture animaux'            , 1, 6, 10,   13, NULL, 'ANIMAUXSIN'),
    (15,'Facture habitation'         , 2, 6, 10,   13, NULL, NULL),
    (16,'Facture auto'               , 1, 6, 10,   13, NULL, 'AUTOSINISTRES');


INSERT INTO `keywords` VALUES 
    (2, 'date d\'apparition', 1, 1),
    (3, 'des premiers symptômes', 1, 1),
    (5, 'sinistres animaux', 1, 1),
    (6, 'declaration sinistre', 1, 1),
    (7, 'remplir par le proprietaire', 1, 1),
    (8, 'ambulance animaliere', 1, 1),
    (9, 'avec tampon du pharmacien', 1, 1),
    (10, 'identification du propietaire', 1, 1),
    (11, 'medicaments', 1, 1),
    (12, 'demande de remboursements', 1, 1),
    (13, 'declaration de sinistre', 1, 1),
    (14, 'sante des animaux', 1, 1),
    (16, 'joindre la facture', 1, 1),
    (17, 'tva', 1, 13),
    (18, 'repartition des taxes', 1, 13),
    (19, 't.v.a', 1, 13),
    (20, 'note d\'honoraire', 1, 13),
    (22, 'ordonnance', 2, 13),
    (23, 'intracommunautaire ' ,1, 13),
    (24, 'designation', 2, 13),
    (25, 'paiement', 1, 13),
    (27, 'mode de reglement',1, 13),
    (29, 'net a payer', 1, 13),
    (30, 'veterinaire', 1, 13),
    (31, 'facture', 2, 13),
    (32, 'releve d\'honoraire', 1, 13),
    (35, 'clinique', 1, 13),
    (38, 'animaux', 1, 13),
    (40, 'Mise en demeure', 1, 4),
    (42, 'Attestation de droit', 1, 6),
    (45, 'par le veterinaire', 1, 1),
    (64, 'animaux', 1, 14),
    (66, 'veterinaire', 1, 14),
    (67, 'organisme de rattachement', 1, 6),
    (68, 'numero de l\'assure' 1, 6),
    (69, 'nom de l\'assure', 1, 6),
    (70, 'toute attestation', 1, 6),
    (71, 'famille suivi', 1, 6),
    (72, 'espace client', 1, 2),
    (73, 'signature du proprietaire', 1, 2),
    (77, 'Numero d\'adherent', 1, 4),
    (78, 'soin', 1, 1),
    (79, 'tarif', 1, 13),
    (80, 'Nous vous invitons', 1, 4),
    (81, 'periode concernee', 1, 4),
    (82, 'a defaut de reglement', 1, 4),
    (83, 'seront suspendues', 1, 4),
    (84, 'ci-dessus apparaissent', 1, 4),
    (85, 'adressant votre', 1, 4),
    (86, 'demande de resiliation', 1, 8),
    (87, 'L 221-10-2', 1, 8),
    (88, 'demande de resilier', 1, 8),
    (89, 'mandat de resiliation', 1, 8),
    (90, 'souhaite resilier', 1, 8),
    (91, 'mandate par', 1, 8),
    (92, 'resiliation du contrat', 1, 8),
    (93, 'resiliation infra-annuelle', 1, 8),
    (94, 'droit a la resiliation', 1, 8),
    (95, 'resiliation', 0, 8),
    (96, 'Je resilie', 1, 8),
    (97, 'resiliation de mon contrat', 1, 8),
    (98, 'resiliation de ma mutuelle', 1, 8),
    (99, 'resilier mon contrat', 1, 8),
    (100, 'resiliation de contrat', 1, 8),
    (101, 'resiliation de son contrat', 1, 8),
    (102, 'mettre fin au contrat', 2, 8),
    (103, 'resilier mutuelle', 1, 8),
    (104, 'COBSA', 2, 9),
    (105, 'CAXIB', 2, 9),
    (106, 'sante', 1, 9),
    (107, 'habitation', 1, 10),
    (109, 'automobile', 1, 10),
    (110, 'ECAMRH', 2, 10),
    (111, 'ECAGAV1Y', 2, 9),
    (112, 'garantie de la vie', 1, 9),
    (113, 'MRH1GEN', 2, 10),
    (114, 'CCAP', 2, 9),
    (115, 'CACTIVA', 2, 9),
    (116, 'COSPA', 2, 9),
    (117, 'CVITA', 2, 9),
    (118, 'ECAUT', 2, 10),
    (120, 'ECAPNO', 2, 10),
    (121, 'CBUDA', 2, 9),
    (122, 'COSPB', 2, 9),
    (123, 'CCSSC', 2, 9),
    (124, 'CFORC', 2, 9),
    (125, 'CAVTA', 2, 9),
    (126, 'CJURA', 2, 10),
    (127, 'CCOLPA', 2, 9),
    (128, 'CTNSSB', 2, 9),
    (129, 'CCOLSM', 2, 9),
    (130, 'CCSS', 2, 9),
    (132, 'PJP1INS', ,2, 10),
    (133, 'ECAGRT', 2, 10),
    (134, 'CCOLPQA', 2, 9),
    (135, 'CENIA', 2, 9),
    (136, 'CIAXA', 2, 9),
    (137, 'voiture', 1, 10),
    (138, 'appartement', 1, 10),
    (139, 'maison', 1, 10),
    (140, 'vehicule', 1, 10),
    (152, 'CDYNA', 2, 9),
    (155, 'contrat auto', 1, 10),
    (156, 'releve d\'information', 1, 10),
    (157, ' chatel', 1, 8),
    (158, 'resilier le contrat', 1, 8),
    (159, 'Feuille de soin', 1, 7),
    (162, 'identification de la structure', 1, 7),
    (163, 'conditions de prise', 1, 7),
    (164, 'Destinataire inconnu', 1, 3),
    (165, 'pli refuse', 1, 3),
    (166, 'pli avise', 1, 3),
    (167, 'restitution de l\'information', 1, 3),
    (168, 'maileva' ,1, 3),
    (169, 'completer par le facteur ' ,1, 3),
    (170, 'preupe de distbution' ,1, 3),
    (171, 'preuve de distbution' ,1, 3),
    (172, '/ permis de conduire' ,1, 3),
    (173, 'haut selon les pointilles', 1, 3),
    (174, 'resiliation contrat', 1, 8),
    (175, 'chat ', 1, 11),
    (176, 'ECANIY', 2, 11),
    (177, 'calinia', 2, 11),
    (178, 'animal', 1, 11),
    (179, 'animaux', 2, 11),
    (180, 'ANI1', 2, 11),
    (181, 'chien', 1, 14),
    (182, ' chat ', 1, 14),
    (183, 'animal', 1, 14),
    (184, 'habitation', 1, 15),
    (185, 'maison', 1, 15),
    (186, 'appartement', 1, 15),
    (187, 'CJURA', 2, 15),
    (188, 'PJP1INS', 2, 15),
    (189, 'ECAMRH', 2, 15),
    (190, 'MRH1GEN', 2, 15),
    (191, 'ECAPNO', 2, 15),
    (192, 'auto ', 1, 16),
    (193, 'automobile', 1, 16),
    (194, 'ECAUT', 1, 16),
    (195, 'ECAGRT', 1, 16),
    (196, 'automobile', 1, 16),
    (197, 'vehicule', 1, 16),
    (198, 'contrat auto', 1, 16),
    (199, 'releve d\'information', 1, 16),
    (200, 'ecadpjc', 2, 10),
    (201, 'annexe : exercice', 1, 12),
    (202, 'renonciations contrats(s)', 1, 12),
    (203, 'exercice du droit a', 1, 12),
    (205, 'PJPI', 2, 10),
    (206, 'PJP1', 2, 10),
    (209, 'CTNSSB', 1, 5),
    (210, 'CFORC', 1, 5),
    (211, 'CAVTA', 1, 5),
    (212, 'CCOLPA', 1, 5),
    (214, 'CCOLSM', 1, 5),
    (215, 'CCSSA', 1, 5),
    (216, 'CCOLPQA', 1, 5),
    (217, 'CENIA', 1, 5),
    (218, 'CIAXA', 1, 5),
    (219, 'CDYNA', 1, 5),
    (220, 'COBSA', 1, 5),
    (221, 'CAXIB', 1, 5),
    (222, 'ECAGAV1Y', 1, 5),
    (223, 'garantie de la vie', 1, 5),
    (224, 'CCAPIA', 1, 5),
    (225, 'CACTIVA', 1, 5),
    (226, 'COSPA', 1, 5),
    (227, 'CVITA', 1, 5),
    (228, 'CBUDA', 1, 5),
    (229, 'COSPB', 1, 5),
    (230, 'CCSSC', 1, 5),
    (231, 'resiliation de l\'abonnement',1, 8),
    (232, 'resilier l\'abonnement',1, 8),
    (233, 'mettre fin a mon contrat',2 ,8),
    (234, 'resiliation mutuelle',1, 8),
    (235, 'DMRH', 2, 10),
    (236, 'ECADAN', 2, 11),
    (237, 'ECADAN', 1, 14),
    (238, 'garage', 1, 16),
    (239, 'reparateur agre', 1, 16),
    (240, 'CC.SS', 2, 9),
    (241, 'AN1I', 2, 11),
    (242, 'IARD', 2, 10),
    (243, 'ACS', 1, 9),
    (244, 'AN1N', 2, 11),
    (245, 'O\'Poil', 2, 11),
    (246, 'ECANY', 2, 11),
    (247, 'dentaire', 1, 13),
    (248, 'quittance', 2, 13),
    (249, 'hopital', 1, 13),
    (250, 'orthodonthie', 2, 13),
    (251, 'dentiste', 2, 13),
    (252, 'chirurgien', 2, 13),
    (253, ' Podologue', 2, 13),
    (254, 'Praticien', 2, 13),
    (255, 'Couronne', 2, 13),
    (256, 'Ophtalmologiste', 2, 13),
    (257, 'honoraire', 1, 13),
    (258, 'devis', 1, 13),
    (259, 'vos remboursements', 1, 13),
    (260, 'detail des versements', 1, 13),
    (261, 'nature des', 1, 13),
    (262, 'remboursement des sommes', 1, 13),
    (263, 'resiliation de mutuelle',1, 8),
    (264, 'souhaite le resilier',1, 8),
    (265, 'resiliation infra annuelle',1, 8),
    (266, 'mettre un terme', 2, 8),
    (267, 'veux annuler', 1, 8),
    (268, 'delai de preavis', 1, 8),
    (269, 'resitier mon contrat ', 1, 8),
    (270, 'avenant de resiliation ', 1, 8),
    (271, 'resiliation assurance', 1, 8),
    (272, 'renonce au contrat', 1, 8),
    (273, 'renonce a mon contrat', 1, 8),
    (274, 'vouloir resilier', 1, 8),
    (275, 'recommandée de resiliation', 1, 8),
    (276, 'resiliation d\'assurance',1, 8),
    (277, 'mettre fin aux contrats', 2, 8),
    (278, 'lettre de resiliation', 1, 8),
    (279, 'ANI2', 2, 11),
    (280, 'rompre le contrat', 1, 8),
    (281, 'rupture de contrat', 1, 8),
    (282, 'mettre fin a mes contrats', 2, 8),
    (283, 'resilie mes contrats', 1, 8);


